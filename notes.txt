daha sonrasında encapsulation gerekecek, encapsulate edeceğimiz kısımı kullanılmayan bir flag kodunu encapsulatei açmak için setleyebiliriz
daha sonra bir pakette encapsulate olup olmadığını anlamak için bu flag kodu var mı diye konrtol edilebilir
eğer yoksa normal paket gibi davranılabilir

diğer bir seçenek her şeyi encapsulate etmek
encapsulate gerekmeyen packetler için de dummy bytelar yazılabilir striplenecek kısıma

https://scapy.readthedocs.io/en/latest/introduction.html -can be used for encapsulation?
https://www.techtarget.com/searchnetworking/tip/Intro-to-encapsulation-and-decapsulation-in-networking#:~:text=What%20is%20encapsulation%3F,referred%20to%20as%20the%20payload.
-some definitions, might be used later on

https://github.com/reverseame/chiton -this repo can be used for encapsulation maybe


https://gchq.github.io/CyberChef/#recipe=Parse_X.509_certificate('PEM') -parse x509 certificate, we can use to double check if the certificates are in ocrrect form


client_id subscriptions tablosu lazım ?????


broker.py 2333: brker starts to listen for connections
broker.py 459 log added
mqtt protocol handler 192de publish ediyor

key establishment bittikten sonra alakalı subscriptionu silinmeli gereksiz yer kaplamamak için (client_id ve authenticationTopice olan subscriptionlar)
(bu gerekli mi?)


maceler matchlemezse connection drop?
session keyi olan authenticated bir client yanlış mac ederse client komple atılmalı mı yoksa choşce token kısmı sıfırdan mı başlamalı?


light/# şeklinde gelirse bütün subtopiclerin choiceTokenları return edilmeli
sublar için aynı token bütük sıkıntı yaratır, sibling topiclere erişim sağlar

------YAPILACAKLAR------

- flagker eklenecek

- macin içinde flagler yok

- sesionda receive edilen mesajların databasede tutulması

- client tarafında unsubscribea encrypt eklenmeli

- look for the structure of unsubscribe messages and topics field of the payload

- unsubscribe iki tarafta da yapılmalı

- client tarafı birden fazla topic adı yollarken ve multiple choiceToken receive

- else caselerinde disconnect olmalı mı

- encapsulation en sonra kalıyor

- connection_class_choicetokenı kullanıyor muyuz ona ögre loglar düzenlenebilir

- gereken flagler: dupFlag, QoS, retainFlag, packetIDentifier

- client id de eklenebilir ama gerek var mı

- publish atılırken de macler eşlemeyebilir, client bilgilendirilmeli, publisher listen olmalı bu konuda, bunun için client_connection_classa ekleme yapmak lazım

- eğer çoklu subs durumunda sadece bir topic maci bozuksa ne yapılmalı? hepsi mi engellenmeli yoksa sadece bir tnaesi mi?

- client subscribe atarken de sendBadMAC gerekebilir, gereken her yer eklemek lazım


------düzeltilecek şeyler------
